ref PlayerDetactedEvent = (begin function {ref rTrt, ref rAtk}
	if IsFormValid rTrt
		if Player.GetDistance3D rTrt <= 3500 || player.IsSneaking || GetPCDetectionState == 3
			PlaySoundFile "Data/sound/fx/AlertReaction/AlertSound.mp3" 1 0 0
		endif
	endif
end)

SetEventHandlerAlt "OnStartCombat" (begin function {ref rTarget, ref rAttacker}
	call PlayerDetactedEvent rTarget rAttacker
end) 2::player